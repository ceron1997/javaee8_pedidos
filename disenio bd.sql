


--------------------------------------------------------
--  DDL for Table PRODUCTOS
--------------------------------------------------------

  CREATE TABLE "PRODUCTOS" SHARING=METADATA 
   (	"ID" NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,, 
	"NOMBRE" VARCHAR2(255), 
	"PRECIO" NUMBER(10,2)
   ) ;



CREATE SEQUENCE SEQ_CLIENTES
START WITH 1
INCREMENT BY 1
NOCACHE;


CREATE TABLE CLIENTES (
    ID_CLIENTE NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    DIRECCION VARCHAR2(150),
    TELEFONO VARCHAR2(20),
    EMAIL VARCHAR2(100),
    FECHA_REGISTRO DATE DEFAULT SYSDATE
);


CREATE TABLE TIPO_CLIENTE (
    ID_TIPO NUMBER PRIMARY KEY,
    DESCRIPCION VARCHAR2(50) NOT NULL
);


INSERT INTO TIPO_CLIENTE (ID_TIPO, DESCRIPCION)
VALUES (1, 'PEQUEÑO');

INSERT INTO TIPO_CLIENTE (ID_TIPO, DESCRIPCION)
VALUES (2, 'MEDIANO');

INSERT INTO TIPO_CLIENTE (ID_TIPO, DESCRIPCION)
VALUES (3, 'GRANDE');

INSERT INTO TIPO_CLIENTE (ID_TIPO, DESCRIPCION)
VALUES (4, 'TRANSNACIONAL');

ALTER TABLE CLIENTES
ADD ID_TIPO NUMBER;

ALTER TABLE CLIENTES
ADD CONSTRAINT FK_TIPO_CLIENTE FOREIGN KEY (ID_TIPO) REFERENCES TIPO_CLIENTE(ID_TIPO);


-- tabla de pedidos con relacion a cliente, un cliente puede tener muchos pedidos, un pedido pertenece a un solo cliente 
CREATE TABLE PEDIDOS (
    ID_PEDIDO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_CLIENTE NUMBER NOT NULL,
    FECHA_PEDIDO DATE DEFAULT SYSDATE,
    ESTADO VARCHAR2(20) DEFAULT 'PENDIENTE',
    TOTAL NUMBER(10, 2),
    CONSTRAINT FK_PEDIDO_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES(ID_CLIENTE)
);

-- detalle 

CREATE TABLE PEDIDOS_DETALLE (
    ID_DETALLE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_PEDIDO NUMBER NOT NULL,
    ID_PRODUCTO NUMBER NOT NULL,
    CANTIDAD NUMBER(10, 2) NOT NULL,
    PRECIO_UNITARIO NUMBER(10, 2) NOT NULL,
    SUBTOTAL NUMBER(10, 2),
    CONSTRAINT FK_DETALLE_PEDIDO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS(ID_PEDIDO),
    CONSTRAINT FK_DETALLE_PRODUCTO FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS(ID)
);




-- data de prueba 
-- productos
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 1', 50.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 2', 75.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 3', 120.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 4', 35.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 5', 150.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 6', 200.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 7', 95.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 8', 60.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 9', 180.00);
INSERT INTO PRODUCTOS (NOMBRE, PRECIO) VALUES ('Producto 10', 210.00);
-- clientes 
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 1', 'Dirección 1', '123456789', 'cliente1@email.com', 1);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 2', 'Dirección 2', '234567891', 'cliente2@email.com', 2);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 3', 'Dirección 3', '345678912', 'cliente3@email.com', 1);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 4', 'Dirección 4', '456789123', 'cliente4@email.com', 3);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 5', 'Dirección 5', '567891234', 'cliente5@email.com', 4);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 6', 'Dirección 6', '678912345', 'cliente6@email.com', 2);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 7', 'Dirección 7', '789123456', 'cliente7@email.com', 3);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 8', 'Dirección 8', '891234567', 'cliente8@email.com', 1);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 9', 'Dirección 9', '912345678', 'cliente9@email.com', 4);
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, DIRECCION, TELEFONO, EMAIL, ID_TIPO) VALUES (SEQ_CLIENTES.NEXTVAL, 'Cliente 10', 'Dirección 10', '102345678', 'cliente10@email.com', 2);

